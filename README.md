# Домашнее задание

## Описание
Создать страницы для сервиса аренды автомобилей из предыдущего задания.

## Страницы
1. Header страницы должен содержать ссылки на список машин (Cars list) и страницу добавления машины (Add)
2. Страница со списком машин. 
    - Страница должна быть доступна по адресу /cars
    - Список должен содержать следующие данные:
        - Model
        - Color
        - Price
    - Название модели машины должно быть кликабельно и вести на страницу соответствующей машины.
    - Placeholder с текстом “No cars” в случае пустого списка машин.
3. Страница отдельной машины
    - Страница должна быть доступна по адресу /cars/{id}
    - Страница должна содержать данные: 
        - Model
        - Year
        - Registration number
        - Color
        - Price
    - Заголовок страницы должен содержать название модели
    - Страница должна содержать кнопки-ссылки для перехода на формы редактирования и удаления машины Edit и Delete с классами “edit-button”, “delete-button”.
    - После нажатия ссылки “Delete” пользователь должен попасть на страницу со списком машин.
4. Страница добавления машины
    - Страница должна быть доступна по адресу /cars/create
    - Все поля формы должны быть с валидацией (только на бекенде, для тестов). 
        - Все поля обязательны для заполнения
        - Значения не больше 255 символов
        - Registration number - 6 символов, буквы и цифры
        - Year - год от 1000 до текущего
        - Color - только буквы
        - Price - только цифры
    - Ошибки валидации должны показываться под полями формы.
    - В случае срабатывания валидации, все поля формы должны оставаться заполненными предыдущими значениями.
    - После сохранения машины должен быть показан список машин с новой записью.
5. Страница редактирования машины
    - Требования по валидации те же, что и к странице добавления
    - Страница должна быть доступна по адресу /cars/{id}/edit
    - После сохранения машины должна быть показана страница машины с обновленными значениями. 


## Требования
### Основные
- Для выполнения взять код из этого репозитория. Репозиторий не должен быть форкнут.
- Страницы должны быть созданы с помощью темплейтов Blade. 
- Темплейты должны наследовать друг друга.
- Должна присутствовать защита от XSS и CSRF атак.
- Для хранения данных должен быть использован репозиторий, подключенный к проекту.
    - https://habrahabr.ru/post/248505/
- Репозиторий должен инжектиться с помощью DependencyInjection.
    - https://laravel.com/docs/5.4/container
    - https://laravel.com/docs/5.4/providers
- Все тесты должны проходить. Тесты менять нельзя, но очень даже можно смотреть. Если какой-то тест написан с ошибкой (sic!) - обращайтесь в комментариях.
- Выложить выполненное ДЗ в отдельный репозиторий на github/bitbucket.

### Дополнительные
- Должны быть использованы возможности PHP 7.1
    - https://habrahabr.ru/post/309858/
- Весь PHP код должен быть задокументирован с помощью PHPDoc согласно стандарту PSR-5.
    - https://github.com/phpDocumentor/fig-standards/tree/master/proposed
- Код должен быть отформатирован согласно PSR-2 и PSR-12.
    - http://www.php-fig.org/psr/psr-2/
    -https://github.com/php-fig/fig-standards/blob/master/proposed/extended-coding-style-guide.md
- Приветствуется (но не обязательно) использование Bootstrap или другого front-end фреймворка для добавления стилей.

## Запуск тестов
1. Создайте APP_URL в .env
2. Запустите тесты
    ```
    php artisan dusk
    ```
    
### Запуск тестов c Homestead
1. Зайдите на виртуальную машину через ssh из папки, где установлен Homestead
    ```
    vagrant ssh
    ```
2. Запустите следующие команды перед запуском тестов
    ```
    wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
    sudo sh -c 'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google-chrome.list'
    sudo apt-get update && sudo apt-get install -y google-chrome-stable
    sudo apt-get install -y xvfb
    ```

3. В отдельном окне терминала: 
    ```
    Xvfb :0 -screen 0 1280x960x24 &
    ```

4. Теперь можно запустить тесты.
    ```
    php artisan dusk
    ```

- см. https://laravel.com/docs/5.4/dusk
- см. https://github.com/laravel/dusk/issues/50#issuecomment-275155974
